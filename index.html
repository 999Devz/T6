<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tahiri</title>
<style>
:root{--bg:#0b0b0b;--card:#141414;--accent:#7a0000;--text:#f2f2f2;--muted:#9a9a9a;}
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{margin:0;background:var(--bg);color:var(--text);}
header{position:fixed;top:0;left:0;width:100%;height:60px;display:flex;align-items:center;padding:0 16px;z-index:100;}
.menu-btn{font-size:26px;cursor:pointer;}
#overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:90;}
#sidemenu{position:fixed;top:0;left:-260px;width:260px;height:100%;background:#0f0f0f;padding:20px;transition:.3s;z-index:100;}
#sidemenu a{display:block;padding:12px 0;color:var(--text);text-decoration:none;cursor:pointer;}
#sidemenu a:hover{color:var(--accent)}
main{padding-top:80px;max-width:1100px;margin:auto;padding:0 16px;}
.auth-box{max-width:420px;margin:40px auto;background:var(--card);padding:20px;border-radius:6px;}
.auth-box input,.auth-box button,select,textarea{width:100%;padding:10px;margin-top:10px;background:#1e1e1e;color:white;border:none;}
.auth-box button{background:var(--accent);cursor:pointer;}
.chat-box{background:var(--card);padding:10px;border-radius:6px;}
.chat-feed{max-height:350px;overflow:auto;margin-bottom:10px;}
.msg{padding:6px 0;border-bottom:1px solid #222;}
.chat-input{display:flex;}
.chat-input input{flex:1;padding:8px;background:#1e1e1e;border:none;color:white;}
.team-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:16px;}
.member{background:var(--card);padding:12px;border-radius:6px;}
.edit-btn{margin-top:6px;background:var(--accent);border:none;color:white;padding:6px;cursor:pointer;width:100%;}
.avatar{width:80px;height:80px;border-radius:50%;background:#333;background-size:cover;background-position:center;margin-bottom:10px;}
.rank{display:inline-block;background:var(--accent);padding:2px 6px;font-size:12px;margin-top:6px;}
section{display:none}
section.active{display:block}
#home-welcome{min-height:calc(100vh - 60px);display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;}
/* EDIT MODAL */
#editModal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:200;justify-content:center;align-items:center;}
#editBox{background:var(--card);padding:20px;border-radius:8px;width:350px;}
</style>
</head>
<body>

<header>
<div class="menu-btn" id="menuBtn">☰</div>
</header>

<div id="overlay"></div>

<div id="sidemenu">
<a onclick="openPage('home')">Home</a>
<a onclick="openPage('projects')">Projecten</a>
<a onclick="openPage('team')">Team</a>
<a onclick="openPage('contact')">Contact</a>
<a onclick="openPage('donations')">Donaties</a>
<a id="loginBtn" onclick="openPage('login')">Inloggen</a>
</div>

<main>

<section id="home" class="active">
<div id="home-welcome">
<h1>TAHIRI</h1>
<p>De Tahiri Website.</p>
</div>
</section>

<section id="projects">
<h2>Projecten – Live Chat</h2>
<div class="chat-box">
<div class="chat-feed" id="chatFeed"></div>
<div class="chat-input">
<input id="chatInput" placeholder="Typ bericht..." disabled>
</div>
</div>
</section>

<section id="team">
<h2>Team</h2>
<div class="team-grid" id="teamGrid"></div>
</section>

<section id="contact">
<h2>Contact</h2>
<p>Mail: TahiriBusiness@gmail.com</p>
<p>Socials:</p>
<p>Tiktok - TahiriBusiness</p>
<p>Instagram - TahiriBusiness</p>
<p>Telegram - TahiriBusiness</p>
<p>Youtube - TahiriBusiness</p>
</section>

<section id="donations">
<h2>Donaties</h2>
<p>Soon.</p>
</section>

<section id="login">
<div class="auth-box">
<h2>Inloggen</h2>
<input id="loginIdentifier" placeholder="Naam of email">
<input id="loginPass" type="password" placeholder="Wachtwoord">
<button onclick="login()">Inloggen</button>
<hr style="margin:20px 0;border:1px solid #222">
<h2>Account maken</h2>
<input id="regName" placeholder="Accountnaam">
<input id="regEmail" placeholder="Email">
<input id="regPass" type="password" placeholder="Wachtwoord">
<button onclick="register()">Account maken</button>
</div>
</section>

</main>

<div id="editModal">
<div id="editBox">
<h3>Profiel bewerken</h3>
<input id="editName" placeholder="Naam">
<textarea id="editContact" placeholder="Contact info"></textarea>
<select id="editRole">
<option value="founder">Founder</option>
<option value="leader">Leader</option>
<option value="member">Member</option>
<option value="visitor">Visitor</option>
</select>
<input type="file" id="editAvatar" accept="image/*">
<button onclick="saveProfile()">Opslaan</button>
<button onclick="closeEdit()">Annuleren</button>
</div>
</div>

<script>
let DEFAULT_AVATAR="";
let users=JSON.parse(localStorage.getItem("users")||"[]");
let current=JSON.parse(localStorage.getItem("current"));
let feed=JSON.parse(localStorage.getItem("feed")||"[]");
let editingId=null;

/* 6 standaard profielen */
if(users.length===0){
let roles=["founder","leader","member","member","visitor","visitor"];
for(let i=0;i<6;i++){
users.push({id:crypto.randomUUID(),name:"Member "+(i+1),email:"user"+i+"@mail.com",pass:"1234",role:roles[i],avatar:DEFAULT_AVATAR,contact:""});
}
localStorage.setItem("users",JSON.stringify(users));
}

function toggleMenu(){
const m=document.getElementById("sidemenu");
const o=document.getElementById("overlay");
if(m.style.left==="0px"){m.style.left="-260px";o.style.display="none";}
else{m.style.left="0px";o.style.display="block";}
}
menuBtn.onclick=toggleMenu;
overlay.onclick=toggleMenu;

function openPage(id){
document.querySelectorAll("main > section").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
toggleMenu();
}

function saveUsers(){localStorage.setItem("users",JSON.stringify(users));}

function register(){
const name=regName.value.trim();
const email=regEmail.value.trim();
const pass=regPass.value;
if(!name||!email||!pass)return alert("Vul alles in");
if(users.find(u=>u.email===email))return alert("Email bestaat al");
users.push({id:crypto.randomUUID(),name,email,pass,role:"visitor",avatar:DEFAULT_AVATAR,contact:""});
saveUsers();
alert("Account gemaakt");
}

function login(){
const id=loginIdentifier.value.trim();
const pass=loginPass.value;
const user=users.find(u=>(u.email===id||u.name===id)&&u.pass===pass);
if(!user)return alert("Foute login");
current=user;
localStorage.setItem("current",JSON.stringify(current));
if(["member","leader","founder"].includes(current.role))chatInput.disabled=false;
updateLoginBtn();
loadTeam();
openPage("home");
}

function logout(){localStorage.removeItem("current");location.reload();}
function updateLoginBtn(){
const btn=document.getElementById("loginBtn");
if(!current){btn.textContent="Inloggen";btn.onclick=()=>openPage("login");}
else{btn.textContent="Uitloggen";btn.onclick=logout;}
}
updateLoginBtn();

/* CHAT */
function renderChat(){
chatFeed.innerHTML="";
feed.forEach(m=>{
chatFeed.innerHTML+=`<div class="msg"><b>${m.name}</b>: ${m.text}</div>`;
});
}
renderChat();

chatInput.addEventListener("keypress",e=>{
if(e.key==="Enter" && current && ["member","leader","founder"].includes(current.role)){
feed.push({name:current.name,text:chatInput.value});
localStorage.setItem("feed",JSON.stringify(feed));
chatInput.value="";
renderChat();
}
});

/* TEAM */
function loadTeam(){
teamGrid.innerHTML="";
users.forEach(u=>{
let canEdit=false;
if(current){
if(["leader","founder"].includes(current.role))canEdit=true;
if(current.role==="member" && current.id===u.id)canEdit=true;
}
teamGrid.innerHTML+=`
<div class="member">
<div class="avatar" style="background-image:url('${u.avatar||""}')"></div>
<h4>${u.name}</h4>
<div class="rank">${u.role}</div>
${canEdit?`<button class="edit-btn" onclick='openEdit("${u.id}")'>Edit</button>`:""}
</div>`;
});
}
loadTeam();

function openEdit(id){
editingId=id;
let u=users.find(x=>x.id===id);
editName.value=u.name;
editContact.value=u.contact;
editRole.value=u.role;
document.getElementById("editModal").style.display="flex";
}

function closeEdit(){editModal.style.display="none";}

function saveProfile(){
let u=users.find(x=>x.id===editingId);
u.name=editName.value;
u.contact=editContact.value;
u.role=editRole.value;

let file=document.getElementById("editAvatar").files[0];
if(file){
let reader=new FileReader();
reader.onload=function(e){
u.avatar=e.target.result;
saveUsers();
loadTeam();
closeEdit();
};
reader.readAsDataURL(file);
}else{
saveUsers();
loadTeam();
closeEdit();
}
}
</script>
</body>
</html>
