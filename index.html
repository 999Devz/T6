<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tahiri</title>

<style>
:root{
--bg:#0b0b0b;
--card:#141414;
--accent:#7a0000;
--text:#f2f2f2;
--muted:#9a9a9a;
--error:#ff4d4d;
}

*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{margin:0;background:var(--bg);color:var(--text);}

header{
position:fixed;top:0;left:0;width:100%;height:60px;
display:flex;align-items:center;padding:0 16px;z-index:100;
}

.menu-btn{font-size:26px;cursor:pointer;}

#overlay{
display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:90;
}

#sidemenu{
position:fixed;top:0;left:-260px;width:260px;height:100%;
background:#0f0f0f;padding:20px;transition:.3s;z-index:100;
}

#sidemenu a{
display:block;padding:12px 0;color:var(--text);
text-decoration:none;cursor:pointer;
}

#sidemenu a:hover{color:var(--accent)}

main{
padding-top:80px;
max-width:1100px;
margin:auto;
padding-left:16px;
padding-right:16px;
}

section{display:none}
section.active{display:block}

#homeHeader{
display:none;
text-align:center;
margin-top:120px;
}
#homeHeader.active{display:block}

/* CHAT */
.chat-box{background:var(--card);padding:12px;border-radius:6px;}
.chat-feed{max-height:350px;overflow:auto;margin-bottom:10px;}
.msg{padding:6px 0;border-bottom:1px solid #222;}
.chat-input input{
width:100%;
padding:10px;
background:#1e1e1e;
border:none;
color:white;
}
.permission-msg{
margin-top:8px;
font-size:13px;
color:var(--error);
}

/* TEAM */
.team-grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(320px,1fr));
gap:16px;
}

.member{
background:var(--card);
padding:16px;
border-radius:8px;
}

.member-top{
display:flex;
gap:15px;
align-items:flex-start;
}

.avatar{
width:90px;
height:90px;
border-radius:50%;
background:#333;
background-size:cover;
background-position:center;
flex-shrink:0;
cursor:pointer;
}

.member-info h4{
margin:0;
font-size:18px;
}

.role{
font-size:14px;
color:var(--muted);
margin-top:4px;
}

.bio{
margin-top:12px;
font-size:14px;
color:#ccc;
white-space:pre-line;
}

.contact{
margin-top:8px;
font-size:13px;
color:#aaa;
}

.edit-btn{
margin-top:12px;
background:var(--accent);
border:none;
color:white;
padding:6px;
cursor:pointer;
width:100%;
}

/* MODAL */
.modal{
display:none;
position:fixed;
inset:0;
background:rgba(0,0,0,.6);
align-items:center;
justify-content:center;
z-index:200;
}

.modal-content{
background:#111;
padding:20px;
width:400px;
border-radius:8px;
}

.modal-content input,
.modal-content textarea,
.modal-content select{
width:100%;
margin-top:10px;
padding:8px;
background:#1e1e1e;
border:none;
color:white;
}

.modal-content button{
margin-top:12px;
padding:8px;
background:var(--accent);
border:none;
color:white;
cursor:pointer;
width:100%;
}

/* AUTH */
.auth-box{
max-width:420px;margin:40px auto;
background:var(--card);padding:20px;border-radius:6px;
}

.auth-box input,.auth-box button{
width:100%;padding:10px;margin-top:10px;
background:#1e1e1e;color:white;border:none;
}

.auth-box button{background:var(--accent);cursor:pointer}

.error-msg{
margin-top:10px;
color:var(--error);
font-size:13px;
}
.success-msg{
margin-top:10px;
color:#4dff88;
font-size:13px;
}
</style>
</head>

<body>

<header>
<div class="menu-btn" id="menuBtn">☰</div>
</header>

<div id="overlay"></div>

<div id="sidemenu">
<a onclick="openPage('home')">Home</a>
<a onclick="openPage('projects')">Projecten</a>
<a onclick="openPage('team')">Team</a>
<a onclick="openPage('contact')">Contact</a>
<a onclick="openPage('donations')">Donaties</a>
<a id="loginBtn" onclick="openPage('login')">Inloggen</a>
</div>

<main>

<div id="homeHeader">
<h1>TAHIRI</h1>
<p>De Tahiri Site</p>
</div>

<section id="home" class="active"></section>

<section id="projects">
<h2>Projecten – Live Chat</h2>
<div class="chat-box">
<div class="chat-feed" id="chatFeed"></div>
<div class="chat-input">
<input id="chatInput" placeholder="Typ bericht...">
</div>
<div id="chatPermissionMsg" class="permission-msg"></div>
</div>
</section>

<section id="team">
<h2>Team</h2>
<div class="team-grid" id="teamGrid"></div>
</section>

<section id="contact">
<h2>Contact</h2>
<p>Mail: TahiriBusiness@gmail.com</p>
<p>Tiktok - TahiriBusiness</p>
<p>Instagram - TahiriBusiness</p>
<p>Telegram - TahiriBusiness</p>
<p>Youtube - TahiriBusiness</p>
</section>

<section id="donations">
<h2>Donaties</h2>
<p>Soon.</p>
</section>

<section id="login">
<div class="auth-box">
<h2>Inloggen</h2>
<input id="loginIdentifier" placeholder="Naam of email">
<input id="loginPass" type="password" placeholder="Wachtwoord">
<button onclick="login()">Inloggen</button>
<div id="loginMsg" class="error-msg"></div>

<hr style="margin:20px 0;border:1px solid #222">

<h2>Account maken</h2>
<input id="regName" placeholder="Accountnaam">
<input id="regEmail" placeholder="Email">
<input id="regPass" type="password" placeholder="Wachtwoord">
<button onclick="register()">Account maken</button>
<div id="regMsg"></div>
</div>
</section>

</main>

<script>
const menuBtn=document.getElementById("menuBtn");
const overlay=document.getElementById("overlay");
menuBtn.onclick=toggleMenu;
overlay.onclick=toggleMenu;

function toggleMenu(){
const m=document.getElementById("sidemenu");
if(m.style.left==="0px"){m.style.left="-260px";overlay.style.display="none";}
else{m.style.left="0px";overlay.style.display="block";}
}

let users=JSON.parse(localStorage.getItem("users")||"[]");
let current=JSON.parse(localStorage.getItem("current"));
let feed=JSON.parse(localStorage.getItem("feed")||"[]");
const DEFAULT_AVATAR="https://i.imgur.com/6VBx3io.png";

function saveUsers(){localStorage.setItem("users",JSON.stringify(users));}
function saveCurrent(){localStorage.setItem("current",JSON.stringify(current));}

/* AUTH */

function register(){
regMsg.innerHTML="";
const name=regName.value.trim();
const email=regEmail.value.trim();
const pass=regPass.value.trim();

if(!name||!email||!pass){
regMsg.innerHTML="<div class='error-msg'>Vul alle velden in.</div>";
return;
}

if(users.find(u=>u.email===email)){
regMsg.innerHTML="<div class='error-msg'>Email is al gekoppeld aan een account.</div>";
return;
}

users.push({
id:crypto.randomUUID(),
name,
mail:email,
email,
pass,
role:"visitor",
avatar:"",
bio:"",
contact:""
});

saveUsers();
regMsg.innerHTML="<div class='success-msg'>Account succesvol aangemaakt.</div>";
}

function login(){
loginMsg.innerHTML="";
const id=loginIdentifier.value.trim();
const pass=loginPass.value.trim();

if(!id||!pass){
loginMsg.innerText="Vul alle velden in.";
return;
}

const user=users.find(u=>u.email===id||u.name===id);

if(!user){
loginMsg.innerText="Account niet gevonden.";
return;
}

if(user.pass!==pass){
loginMsg.innerText="Wachtwoord klopt niet.";
return;
}

current=user;
saveCurrent();
updatePermissions();
openPage("home");
}

function updatePermissions(){
if(!current){
chatInput.disabled=true;
chatPermissionMsg.innerText="Je moet ingelogd zijn als member of hoger om berichten te sturen.";
return;
}

if(["member","leader","founder"].includes(current.role)){
chatInput.disabled=false;
chatPermissionMsg.innerText="";
}else{
chatInput.disabled=true;
chatPermissionMsg.innerText="Je hebt geen permissie om berichten te sturen.";
}
}

updatePermissions();

/* CHAT */
function renderChat(){
chatFeed.innerHTML="";
feed.forEach(m=>{
chatFeed.innerHTML+=`<div class="msg"><b>${m.name}</b>: ${m.text}</div>`;
});
}

renderChat();

chatInput.addEventListener("keypress",e=>{
if(e.key==="Enter"){
if(chatInput.disabled){
chatPermissionMsg.innerText="Je hebt geen permissie om berichten te sturen.";
return;
}
if(chatInput.value.trim()==="") return;

feed.push({name:current.name,text:chatInput.value});
localStorage.setItem("feed",JSON.stringify(feed));
chatInput.value="";
renderChat();
}
});

window.addEventListener("storage",e=>{
if(e.key==="feed"){
feed=JSON.parse(localStorage.getItem("feed"));
renderChat();
}
});

function openPage(id){
document.querySelectorAll("main > section").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
document.getElementById("homeHeader").classList.toggle("active",id==="home");
toggleMenu();
}
openPage("home");
</script>

</body>
</html>
